diff -up linux-2.6.9/arch/ppc/platforms/chrp_setup.c.orig linux-2.6.9/arch/ppc/platforms/chrp_setup.c
--- linux-2.6.9/arch/ppc/platforms/chrp_setup.c.orig	2004-10-18 23:54:55.000000000 +0200
+++ linux-2.6.9/arch/ppc/platforms/chrp_setup.c	2008-01-10 18:13:25.000000000 +0100
@@ -107,11 +107,15 @@ chrp_show_cpuinfo(struct seq_file *m)
 	int i, sdramen;
 	unsigned int t;
 	struct device_node *root;
-	const char *model = "";
+	const char *model = NULL;
 
 	root = find_path_device("/");
 	if (root)
 		model = get_property(root, "model", NULL);
+
+	if (!model)
+		model = "";
+
 	seq_printf(m, "machine\t\t: CHRP %s\n", model);
 
 	/* longtrail (goldengate) stuff */
@@ -203,10 +207,17 @@ static void __init sio_fixup_irq(const c
 
 static void __init sio_init(void)
 {
-	struct device_node *root;
+	struct device_node *root = find_path_device("/");
+	const char* model;
+
+	if (!root)
+		return;
+
+	model = get_property(root, "model", NULL);
+	if (!model)
+		return;
 
-	if ((root = find_path_device("/")) &&
-	    !strncmp(get_property(root, "model", NULL), "IBM,LongTrail", 13)) {
+	if (!strncmp(model, "IBM,LongTrail", 13)) {
 		/* logical device 0 (KBC/Keyboard) */
 		sio_fixup_irq("keyboard", 0, 1, 2);
 		/* select logical device 1 (KBC/Mouse) */
