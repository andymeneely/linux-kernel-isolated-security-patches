--- linux-2.6.9/fs/hfs/super.c.pre.mokb	2006-12-11 14:59:13.000000000 -0500
+++ linux-2.6.9/fs/hfs/super.c	2006-12-11 15:01:42.000000000 -0500
@@ -289,11 +289,13 @@ static int hfs_fill_super(struct super_b
 		hfs_find_exit(&fd);
 		goto bail_no_root;
 	}
+	res = -EINVAL;
 	root_inode = hfs_iget(sb, &fd.search_key->cat, &rec);
 	hfs_find_exit(&fd);
 	if (!root_inode)
 		goto bail_no_root;
 
+	res = -ENOMEM;
 	sb->s_root = d_alloc_root(root_inode);
 	if (!sb->s_root)
 		goto bail_iput;