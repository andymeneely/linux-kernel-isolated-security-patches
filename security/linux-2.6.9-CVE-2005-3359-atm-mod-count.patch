--- linux-2.6.9/net/socket.c~	2006-01-31 12:50:53.000000000 +0100
+++ linux-2.6.9/net/socket.c	2006-01-31 12:51:13.000000000 +0100
@@ -1161,8 +1161,10 @@
 	if (!try_module_get(net_families[family]->owner))
 		goto out_release;
 
-	if ((i = net_families[family]->create(sock, protocol)) < 0)
+	if ((i = net_families[family]->create(sock, protocol)) < 0) {
+		sock->ops = NULL;
 		goto out_module_put;
+	}
 	/*
 	 * Now to bump the refcnt of the [loadable] module that owns this
 	 * socket at sock_release time we decrement its refcnt.
