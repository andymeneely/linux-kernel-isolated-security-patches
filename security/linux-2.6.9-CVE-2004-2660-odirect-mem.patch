--- a/fs/direct-io.c	2006-05-22 21:30:05 -07:00
+++ b/fs/direct-io.c	2006-05-22 21:30:05 -07:00
@@ -844,8 +844,10 @@
 				char *kaddr;
 
 				/* AKPM: eargh, -ENOTBLK is a hack */
-				if (dio->rw == WRITE)
+				if (dio->rw == WRITE) {
+					page_cache_release(page);
 					return -ENOTBLK;
+				}
 
 				if (dio->block_in_file >=
 					i_size_read(dio->inode)>>blkbits) {
